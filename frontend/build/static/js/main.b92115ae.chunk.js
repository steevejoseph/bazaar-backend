(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{109:function(e,t,a){e.exports=a(170)},119:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(41),i=a.n(s),c=a(11),o=a(14),l=a(96),p=a.n(l),u=(a(119),a(120),a(5)),d=a(6),m=a(8),h=a(7),v=a(9),g=a(176),b=a(173),f=a(179),E=a(10),y=a(3),O=a(172),j=a(175),k=a(174),C=a(16),S=a.n(C),N=["Category","Graphics & Design","Digital Marketing","Writing & Translation","Video & Animation","Music & Audio","Programming & Tech","Business","Fun & Lifestyle","Lessons/Tutoring","Event Management","Beauty","E-Commerce","Photography"],w=[{category:"Graphics & Design",description:"Bring art to your product or service with Graphics and Designs."},{category:"Digital Marketing",description:"Help push your marketing message further with Digital Marketing."},{category:"Writing & Translation",description:"Get copy done and anything translated for your needs."},{category:"Video & Animation",description:"Produce your message with video or bring your art to life wih animation."},{category:"Music & Audio",description:"Develop your sound and let it be heard."},{category:"Programming & Tech",description:"Need technical help? We've got coders and technologists waiting to build."},{category:"Business",description:"Outsource your business needs and get things done."},{category:"Fun & Lifestyle",description:"Services to shake things up and have some fun."},{category:"Lessons/Tutoring",description:"Force = Mass x Acceleration. Get help with a course."},{category:"Event Management",description:"Hosting a big gig? Outsource help with Event Management."},{category:"Beauty",description:"You're beautiful. Make yourself look like a snack with Beauty."},{category:"E-Commerce",description:"Business is booming. E-Commerce pros and experts ready to help."},{category:"Photography",description:"Capture that perfect moment with Photography."}],I={overrides:{h1:{props:{className:"h4"}},h2:{props:{className:"h5"}},h3:{props:{className:"h6"}},h4:{props:{className:"h6"}},h5:{props:{className:"h6"}},h6:{props:{className:"h6"}}}},x="https://us1.pusherplatform.io/services/chatkit_token_provider/v1/b90a149b-4af4-4243-9831-b133bff9a54e/token",T="v1:us1:b90a149b-4af4-4243-9831-b133bff9a54e",M=a(78),D="https://bazaar-backend.herokuapp.com/api",P="create_user",R="create_service",_="edit-service",L="delete_service",U="login",F="service_search",H="fetch_services",B="fetch_users_services",W="get_local_from_storage",z="log_out",A="set_service_to_edit",J="service_search_tag",$="create_review",V="fetch_service_owner",G="fetch_service_and_owner",Y="connect_user_to_chat",q="fetch_users_rooms",K="create_room",Q="fetch_user_view_services",X="add_favorite",Z="fetch_favorite_services";function ee(e){var t={query:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",tags:[e]};return S.a.post("".concat(D,"/services/searchtags"),t).then(function(t){return{type:J,tag:e,payload:t}})}function te(e){var t={query:e};return S.a.post("".concat(D,"/services/search"),t).then(function(e){return{type:F,payload:e}})}function ae(e){return new M.ChatManager({instanceLocator:T,userId:e,tokenProvider:new M.TokenProvider({url:x})}).connect().then(function(e){return{type:Y,payload:e}})}function re(e){var t={newFavoriteId:e};return S.a.post("".concat(D,"/users/addFavorite"),t).then(function(e){return{type:X,payload:e}})}var ne=a(97),se=a(27),ie=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},a.errorCallback=a.errorCallback.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"renderField",value:function(e){var t=e.meta,a=t.touched,r=t.error,s="form-control form-control-lg ".concat(a&&r?"is-invalid ":"");return n.a.createElement("div",null,n.a.createElement("input",Object.assign({type:"password"===e.input.name||"confirmPassword"===e.input.name?"password":"text",className:s,autoComplete:"off",placeholder:e.label},e.input)),n.a.createElement("p",{className:"text-danger"},a?r:""))}},{key:"errorCallback",value:function(){this.setState(Object(E.a)({},this.state,{hasError:!this.state.hasError}))}},{key:"onSubmit",value:function(e){var t=this;this.props.createUser(e,function(){t.props.successCallback()},function(){t.errorCallback()})}},{key:"render",value:function(){var e=this.props.handleSubmit;return n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",null,this.state.hasError&&n.a.createElement(se.a,{color:"danger"},"Email is already in use")),n.a.createElement("form",{onSubmit:e(this.onSubmit.bind(this))},n.a.createElement(j.a,{label:"First Name",name:"firstName",component:this.renderField}),n.a.createElement(j.a,{label:"Last Name",name:"lastName",component:this.renderField}),n.a.createElement(j.a,{label:"Email",name:"email",component:this.renderField}),n.a.createElement(j.a,{label:"Password",name:"password",component:this.renderField}),n.a.createElement(j.a,{label:"Confirm Password",name:"confirmPassword",component:this.renderField}),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-danger"},"Sign up"))),n.a.createElement("div",{className:"text-center"},n.a.createElement("p",null,"Already have an account? ",n.a.createElement("a",{href:"#",onClick:this.props.switchToLogin},"Log in"))))}}]),t}(r.Component);var ce=Object(k.a)({validate:function(e){var t={};return e.firstName||(t.firstName="Enter your first name."),e.lastName||(t.lastName="Enter your last name."),e.email||(t.email="Enter your UCF email."),e.email&&!new RegExp(/((.+)@((.)+.)?ucf.edu)$/i).test(e.email)?t.email="Enter your UCF email.":e.email&&!ne.validate(e.email)&&(t.email="Email is invlaid."),e.password||(t.password="Enter your password."),e.password&&e.password.length<6?t.password="Password must be at least 6 characters long.":e.confirmPassword&&e.password!=e.confirmPassword&&(t.confirmPassword="Passwords don't match."),t},form:"SignupForm"})(Object(c.b)(null,{createUser:function(e,t,a){var r={firstName:e.firstName,lastName:e.lastName,email:e.email,password:e.password};return S.a.post("".concat(D,"/users/signup"),r).then(function(e){return t(),S.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),{type:P,payload:e}}).catch(function(){return a()})}})(ie)),oe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},a.errorCallback=a.errorCallback.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"renderField",value:function(e){var t=e.meta,a=t.touched,r=t.error,s="form-control form-control-lg ".concat(a&&r?"is-invalid ":"");return n.a.createElement("div",null,n.a.createElement("input",Object.assign({type:"password"===e.input.name?"password":"text",className:s,autoComplete:"off",placeholder:e.label},e.input)),n.a.createElement("p",{className:"text-danger"},a?r:""))}},{key:"errorCallback",value:function(){this.setState(Object(E.a)({},this.state,{hasError:!this.state.hasError}))}},{key:"onSubmit",value:function(e){var t=this;this.props.login(e,function(){t.props.successCallback()},function(){t.errorCallback()})}},{key:"render",value:function(){var e=this.props.handleSubmit;return n.a.createElement("div",{className:"modal-body"},n.a.createElement("div",null,this.state.hasError&&n.a.createElement(se.a,{color:"danger"},"Invalid Credentials")),n.a.createElement("form",{onSubmit:e(this.onSubmit.bind(this))},n.a.createElement(j.a,{label:"Email",name:"email",component:this.renderField}),n.a.createElement(j.a,{label:"Password",name:"password",component:this.renderField}),n.a.createElement("div",{className:"form-group"},n.a.createElement("button",{type:"submit",className:"btn btn-lg btn-block btn-danger"},"Log in"))),n.a.createElement("div",{className:"text-center"},n.a.createElement("p",null,"Don't have an account? ",n.a.createElement("a",{href:"#",onClick:this.props.switchToSignup},"Sign up"))))}}]),t}(r.Component);var le=Object(k.a)({validate:function(e){var t={};return e.email||(t.email="Enter your UCF email."),e.password||(t.password="Enter your password"),t},form:"LoginForm"})(Object(c.b)(null,{login:function(e,t,a){var r={email:e.email,password:e.password};return S.a.post("".concat(D,"/users/login"),r).then(function(e){return t(),S.a.defaults.headers.common.Authorization="Bearer ".concat(e.data.token),{type:U,payload:e}}).catch(function(){return a()})}})(oe)),pe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).renderFooter=a.renderFooter.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"renderFooter",value:function(){if(this.props.modalFooter)return n.a.createElement("div",null,n.a.createElement(se.f,null,this.props.modalFooter))}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(se.d,{isOpen:this.props.isOpen,toggle:this.props.toggle,className:this.props.className},n.a.createElement(se.g,{toggle:this.props.toggle},this.props.modalHeader),n.a.createElement(se.e,null,this.props.modalBody),this.renderFooter()))}}]),t}(r.Component),ue=a(13),de=a.n(ue),me=a(178),he=a(66),ve=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={description:a.props.isEdit&&a.props.service?a.props.service.description:""},a.renderDropdown=a.renderDropdown.bind(Object(y.a)(Object(y.a)(a))),a.updateDescription=a.updateDescription.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){if(this.props.isEdit&&!this.props.service||!this.props.user)this.props.history.push("/");else if(this.props.isEdit){var e=[];this.props.service.options&&(e=JSON.parse(this.props.service.options)),this.props.initialize({serviceName:this.props.service.name,category:this.props.service.tags,description:this.props.service.description,starterPrice:this.props.service.price,standardPrice:e.length>1?e[1].price:"",superPrice:e.length>2?e[2].price:"",starterDescription:e.length>0?e[0].description:"",standardDescription:e.length>1?e[1].description:"",superDescription:e.length>2?e[2].description:""})}}},{key:"updateDescription",value:function(e){this.setState({description:e.target.value})}},{key:"renderInputField",value:function(e){var t=e.meta,a=t.touched,r=t.error,s="form-control form-control-lg ".concat(a&&r?"is-invalid ":a&&!r?"is-valid":"");return n.a.createElement("div",null,n.a.createElement("input",Object.assign({type:"text",className:s,autoComplete:"off",placeholder:e.label},e.input)),n.a.createElement("p",{className:"text-danger"},a?r:""))}},{key:"renderTextarea",value:function(e){var t=e.meta,a=t.touched,r=t.error,s="form-control form-control-lg ".concat(a&&r?"is-invalid ":a&&!r?"is-valid":"");return n.a.createElement("div",{className:"h-100"},n.a.createElement("textarea",Object.assign({type:"text",className:"".concat(s," h-100"),autoComplete:"off",placeholder:e.label},e.input)),n.a.createElement("p",{className:"text-danger"},a?r:""))}},{key:"renderSelectOptions",value:function(){return de.a.map(N,function(e){return n.a.createElement("option",{key:e,value:e},e)})}},{key:"renderDropdown",value:function(e){var t=e.meta,a=t.touched,r=t.error,s="form-control form-control-lg ".concat(a&&r?"is-invalid":a&&!r?"is-valid":"");return n.a.createElement("div",null,n.a.createElement("select",Object.assign({className:s},e.input),this.renderSelectOptions()),n.a.createElement("p",{className:"text-danger"},a?r:""))}},{key:"onSubmit",value:function(e){var t=this;this.props.isEdit?(e=Object(E.a)({},e,{id:this.props.service._id}),this.props.editService(e,function(e){t.props.history.push("/services/".concat(e))})):(e=Object(E.a)({},e,{user:this.props.user}),this.props.createService(e,function(e){t.props.history.push("/services/".concat(e))}))}},{key:"renderOptionTabs",value:function(){return n.a.createElement("div",{className:"option-tabs nav nav-tabs text-center nav-justified",id:"nav-tab",role:"tablist"},n.a.createElement("a",{className:"nav-item nav-link ".concat("active"),id:"tab-starter","data-toggle":"tab",role:"tab","aria-controls":"starter","aria-selected":"nav-item nav-link ".concat("true"),href:"#starter"},"Starter Tier"),n.a.createElement("a",{className:"nav-item nav-link",id:"tab-standard","data-toggle":"tab",role:"tab","aria-controls":"standard","aria-selected":"nav-item nav-link false",href:"#standard"},"Standard Tier"),n.a.createElement("a",{className:"nav-item nav-link",id:"tab-super","data-toggle":"tab",role:"tab","aria-controls":"super","aria-selected":"nav-item nav-link false",href:"#super"},"Super Tier"))}},{key:"renderOptionContent",value:function(){return n.a.createElement("div",{className:"option-info tab-content pt-3 px-4 pb-1",id:"nav-tabContent"},n.a.createElement("div",{className:"tab-pane show active",id:"starter",role:"tabpanel","aria-labelledby":"tab-starter"},n.a.createElement(j.a,{label:"Price",name:"starterPrice",component:this.renderInputField}),n.a.createElement(j.a,{label:"Description (What makes this tier different from the rest?)",name:"starterDescription",component:this.renderTextarea})),n.a.createElement("div",{className:"tab-pane",id:"standard",role:"tabpanel","aria-labelledby":"tab-standard"},n.a.createElement(j.a,{label:"Price",name:"standardPrice",component:this.renderInputField}),n.a.createElement(j.a,{label:"Description (What makes this tier different from the rest?)",name:"standardDescription",component:this.renderTextarea})),n.a.createElement("div",{className:"tab-pane",id:"super",role:"tabpanel","aria-labelledby":"tab-super"},n.a.createElement(j.a,{label:"Price",name:"superPrice",component:this.renderInputField}),n.a.createElement(j.a,{label:"Description (What makes this tier different from the rest?)",name:"superDescription",component:this.renderTextarea})))}},{key:"render",value:function(){var e=this.props.handleSubmit;return n.a.createElement("div",{className:"create-edit-form container"},n.a.createElement("h1",{className:"title pb-2"},this.props.isEdit?"Edit your service":"Create a new service"),n.a.createElement("form",{onSubmit:e(this.onSubmit.bind(this))},n.a.createElement(j.a,{label:"Service Name",name:"serviceName",component:this.renderInputField}),n.a.createElement(j.a,{label:"Category",name:"category",component:this.renderDropdown}),n.a.createElement("div",{className:"options text-muted pb-3"},n.a.createElement("nav",null,this.renderOptionTabs()),this.renderOptionContent()),n.a.createElement("div",{className:"row pb-3"},n.a.createElement("div",{className:"col-6"},n.a.createElement(j.a,{label:"Overall Description (Markdown)",name:"description",component:this.renderTextarea,onChange:this.updateDescription})),n.a.createElement("div",{className:"col-6"},n.a.createElement(he.a,{options:I,className:""==this.state.description?"text-muted":""},""==this.state.description?"####Start typing to see a preview...":this.state.description))),n.a.createElement("div",{className:"form-group pt-3"},n.a.createElement("button",{type:"submit",className:"btn btn-danger"},this.props.isEdit?"Save":"Submit"))))}}]),t}(r.Component);var ge=Object(k.a)({validate:function(e){var t={};if(e.serviceName||(t.serviceName="Enter a service name."),e.serviceName&&e.serviceName.length>60&&(t.serviceName="Try making your service name shorter."),e.category?"Category"==e.category&&(t.category="Choose a category."):t.category="Choose a category.",e.description||(t.description="Enter a description."),e.starterPrice){if(e.starterPrice){"$"===e.starterPrice[0]&&(e.starterPrice=e.starterPrice.substring(1));var a=parseInt(e.starterPrice);a?e.starterPrice="$".concat(a):(e.starterPrice="",t.starterPrice="Enter only numbers.")}}else t.starterPrice="Enter a price.";if(e.standardPrice){"$"===e.standardPrice[0]&&(e.standardPrice=e.standardPrice.substring(1));var r=parseInt(e.standardPrice);r?e.standardPrice="$".concat(r):(e.standardPrice="",t.standardPrice="Enter only numbers.")}if(e.superPrice){"$"===e.superPrice[0]&&(e.superPrice=e.superPrice.substring(1));var n=parseInt(e.superPrice);n?e.superPrice="$".concat(n):(e.superPrice="",t.superPrice="Enter only numbers.")}return t},form:"CreateEditServiceForm"})(Object(me.a)(Object(c.b)(function(e){return{user:e.user.user,service:e.services.serviceToEdit}},{createService:function(e,t){var a=[];a.push({name:"Starter",description:e.starterDescription,price:e.starterPrice.substring(1)}),e.standardPrice&&a.push({name:"Standard",description:e.standardDescription,price:e.standardPrice.substring(1)}),e.superPrice&&a.push({name:"Super",description:e.superDescription,price:e.superPrice.substring(1)});var r={name:e.serviceName,tags:e.category,description:e.description,owner:e.user._id,price:e.starterPrice.substring(1),options:JSON.stringify(a)};return S.a.post("".concat(D,"/services/create"),r).then(function(e){return t(e.data.createdService._id),{type:R,payload:e}})},editService:function(e,t){var a=[];a.push({name:"Starter",description:e.starterDescription,price:e.starterPrice.substring(1)}),e.standardPrice&&a.push({name:"Standard",description:e.standardDescription,price:e.standardPrice.substring(1)}),e.superPrice&&a.push({name:"Super",description:e.superDescription,price:e.superPrice.substring(1)});var r={name:e.serviceName,tags:e.category,description:e.description,price:e.starterPrice.substring(1),options:JSON.stringify(a),id:e.id};return S.a.post("".concat(D,"/services/edit"),r).then(function(e){return t(e.data.result._id),{type:_,payload:e}})}})(ve))),be=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isTryingToLogin:!1,showLoginSignupModal:!1},a.toggleLoginIntent=a.toggleLoginIntent.bind(Object(y.a)(Object(y.a)(a))),a.renderLoginSignupModal=a.renderLoginSignupModal.bind(Object(y.a)(Object(y.a)(a))),a.logOut=a.logOut.bind(Object(y.a)(Object(y.a)(a))),a.toggleLoginSignupModal=a.toggleLoginSignupModal.bind(Object(y.a)(Object(y.a)(a))),a.handleLoginClickEvent=a.handleLoginClickEvent.bind(Object(y.a)(Object(y.a)(a))),a.handleSignupClickEvent=a.handleSignupClickEvent.bind(Object(y.a)(Object(y.a)(a))),a.handleCreateServiceClickEvent=a.handleCreateServiceClickEvent.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"setLoginIntent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setState(Object(E.a)({},this.state,{isTryingToLogin:e}),function(){return t()})}},{key:"toggleLoginIntent",value:function(){this.setState(Object(E.a)({},this.state,{isTryingToLogin:!this.state.isTryingToLogin}))}},{key:"logOut",value:function(){this.props.logOutUser(),this.props.history.push("/")}},{key:"toggleLoginSignupModal",value:function(){this.setState(Object(E.a)({},this.state,{showLoginSignupModal:!this.state.showLoginSignupModal}))}},{key:"renderLoginSignupModal",value:function(){return n.a.createElement(pe,{isOpen:this.state.showLoginSignupModal,toggle:this.toggleLoginSignupModal,modalBody:this.state.isTryingToLogin?n.a.createElement(le,{switchToSignup:this.toggleLoginIntent,successCallback:this.toggleLoginSignupModal}):n.a.createElement(ce,{switchToLogin:this.toggleLoginIntent,successCallback:this.toggleLoginSignupModal})})}},{key:"handleCreateServiceClickEvent",value:function(){var e=this;this.props.loggedIn?this.props.history.push("/service/create"):this.setLoginIntent(!0,function(){return e.toggleLoginSignupModal()})}},{key:"handleSignupClickEvent",value:function(){var e=this;this.setLoginIntent(!1,function(){return e.toggleLoginSignupModal()})}},{key:"handleLoginClickEvent",value:function(){var e=this;this.setLoginIntent(!0,function(){return e.toggleLoginSignupModal()})}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("nav",{className:"navbar navbar-light fixed-top navbar-expand-sm bg-white shadow-sm"},n.a.createElement(O.a,{to:"/",className:"navbar-brand mb-0 py-md-1 h1"},"Bazaar"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},n.a.createElement("li",{className:"nav-item py-md-1"},n.a.createElement(O.a,{to:"/",className:"nav-link"},"Home")),n.a.createElement("li",{className:"nav-item py-md-1"},n.a.createElement("a",{className:"nav-link",href:"#",onClick:this.handleCreateServiceClickEvent},"Create Service")),this.props.loggedIn&&n.a.createElement("li",{className:"nav-item dropdown py-md-1"},n.a.createElement("a",{className:"nav-link dropdown-toggle",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},n.a.createElement("i",{className:"fa fa-lg fa-user-circle"})," Account"),n.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdownMenuLink"},n.a.createElement(O.a,{to:"/account",className:"dropdown-item"},"Account"),n.a.createElement("div",{className:"dropdown-divider"}),n.a.createElement(O.a,{to:"/messages",className:"dropdown-item"},"Messages"),n.a.createElement("div",{className:"dropdown-divider"}),n.a.createElement("a",{onClick:this.logOut,className:"dropdown-item"},"Log out"))),!this.props.loggedIn&&n.a.createElement("li",{className:"nav-item py-md-1"},n.a.createElement("a",{className:"nav-link",href:"#",onClick:this.handleSignupClickEvent},"Sign up")),!this.props.loggedIn&&n.a.createElement("li",{className:"nav-item py-md-1"},n.a.createElement("a",{className:"nav-link",href:"#",onClick:this.handleLoginClickEvent},"Log in"))))),this.renderLoginSignupModal())}}]),t}(r.Component);var fe=Object(c.b)(function(e){return{loggedIn:e.user.loggedIn}},{logOutUser:function(){return localStorage.removeItem("loggedInUser"),localStorage.removeItem("token"),{type:z}}})(be),Ee=a(25),ye=a.n(Ee),Oe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(ye.a,{rating:this.props.overallRating,widgetDimensions:"20px",widgetSpacings:"2px"},n.a.createElement(ye.a.Widget,{widgetRatedColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetRatedColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetRatedColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetRatedColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetRatedColor:this.props.starColor})))}}]),t}(r.Component),je=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={rating:0,comment:""},a.changeRating=a.changeRating.bind(Object(y.a)(Object(y.a)(a))),a.onInputChange=a.onInputChange.bind(Object(y.a)(Object(y.a)(a))),a.sendReview=a.sendReview.bind(Object(y.a)(Object(y.a)(a))),a.onSuccess=a.onSuccess.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"changeRating",value:function(e){this.setState({rating:e})}},{key:"onInputChange",value:function(e){this.setState({comment:e})}},{key:"onSuccess",value:function(){this.props.successCallback(),this.setState({rating:0,comment:""})}},{key:"sendReview",value:function(){this.props.createReview(this.props.serviceId,this.state.comment,this.state.rating,this.onSuccess)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"create-review"},n.a.createElement("ul",{className:"list-group list-group-flush"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement("h3",null,"Create Review")),n.a.createElement("li",{className:"list-group-item"},n.a.createElement("div",null,n.a.createElement("h6",null,"Overall Rating"),n.a.createElement(ye.a,{rating:this.state.rating,widgetRatedColors:this.props.starColor,changeRating:this.changeRating,widgetDimensions:"20px",widgetSpacings:"2px"},n.a.createElement(ye.a.Widget,{widgetHoverColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetHoverColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetHoverColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetHoverColor:this.props.starColor}),n.a.createElement(ye.a.Widget,{widgetHoverColor:this.props.starColor}))),n.a.createElement("div",{className:"textarea-review"},n.a.createElement("textarea",{className:"form-control form-control-lg",type:"text",autoComplete:"off",placeholder:"What did you like or dislike?",value:this.state.comment,onChange:function(t){return e.onInputChange(t.target.value)}})),n.a.createElement("div",{onClick:this.sendReview},n.a.createElement("button",{type:"button",className:"btn btn-danger"},"Submit")))))}}]),t}(r.Component);var ke=Object(c.b)(function(e){return{}},{createReview:function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n={rateing:a,comment:t,serviceId:e};return S.a.post("".concat(D,"/services/createComment"),n).then(function(e){return r(),{type:$,payload:e}})}})(je),Ce=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"renderReviewList",value:function(){return de.a.map(this.props.comments,function(e){return n.a.createElement("li",{className:"list-group-item",key:e._id},n.a.createElement("h6",null,n.a.createElement(Oe,{starColor:"rgb(0, 132, 137)",overallRating:e.rateing}),n.a.createElement("div",{className:"p-2"}),e.comment,n.a.createElement("div",{className:""})))})}},{key:"render",value:function(){return this.props.comments?n.a.createElement("div",null,n.a.createElement("ul",{className:"list-group list-group-flush"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement("h3",null,"Reviews (",this.props.comments.length,")")),this.renderReviewList())):n.a.createElement("ul",{className:"list-group list-group-flush"},n.a.createElement("li",{className:"list-group-item"},n.a.createElement("h3",null,"No Reviews Yet")))}}]),t}(r.Component),Se=a(33),Ne=[{src:"https://picsum.photos/1200/780/?random"},{src:"https://picsum.photos/1200/780/?random"},{src:"https://picsum.photos/1200/780/?random"}],we=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).createReviewSuccessCallback=a.createReviewSuccessCallback.bind(Object(y.a)(Object(y.a)(a))),a.handleChatClick=a.handleChatClick.bind(Object(y.a)(Object(y.a)(a))),a.renderOptionTabs=a.renderOptionTabs.bind(Object(y.a)(Object(y.a)(a))),a.renderOptionContent=a.renderOptionContent.bind(Object(y.a)(Object(y.a)(a))),a.handleOwnerClick=a.handleOwnerClick.bind(Object(y.a)(Object(y.a)(a))),a.renderCarouselItems=a.renderCarouselItems.bind(Object(y.a)(Object(y.a)(a))),a.handleHeartClickEvent=a.handleHeartClickEvent.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;window.scrollTo(0,0),this.props.fetchServiceAndOwner(e),this.props.loggedIn&&this.props.connectChat(this.props.user._id)}},{key:"componentDidUpdate",value:function(){this.props.loggedIn&&this.props.connectChat(this.props.user._id)}},{key:"createReviewSuccessCallback",value:function(){var e=this.props.match.params.id;this.props.fetchServiceAndOwner(e)}},{key:"handleOwnerClick",value:function(){this.props.history.push("/user/".concat(this.props.serviceOwner._id))}},{key:"handleChatClick",value:function(){if(this.props.loggedIn){for(var e="".concat(this.props.user.firstName," - ").concat(this.props.service.name),t=0;t<this.props.currentUser.rooms.length;t++)if(this.props.currentUser.rooms[t].name==e)return void this.props.history.push("/messages/".concat(this.props.currentUser.rooms[t].id));this.props.createRoom(this.props.currentUser,this.props.service.owner,e),this.props.history.push("/messages")}}},{key:"handleHeartClickEvent",value:function(){this.props.user&&this.props.addFavorite(this.props.service._id)}},{key:"renderServiceReviews",value:function(e){return n.a.createElement("div",{className:"review-list"},n.a.createElement(Ce,{comments:this.props.comments,overallRating:e,starColor:"rgb(0, 132, 137)"}))}},{key:"renderCreateReview",value:function(){return n.a.createElement("div",{className:"review-create"},n.a.createElement(ke,{successCallback:this.createReviewSuccessCallback,serviceId:this.props.service._id,starColor:"rgb(0, 132, 137)"}))}},{key:"renderOptionTabs",value:function(){var e=0;return de.a.map(JSON.parse(this.props.service.options),function(t){return n.a.createElement("a",{className:"nav-item nav-link ".concat(0==e++?"active":""),id:"tab-".concat(t.name),"data-toggle":"tab",role:"tab","aria-controls":"".concat(t.name),"aria-selected":"nav-item nav-link ".concat(0==e++?"true":"false"),href:"#".concat(t.name)},t.name)})}},{key:"renderOptionContent",value:function(){var e=this,t=0,a=this.props.service.owner,r=this.props.user&&a===this.props.user._id;return de.a.map(JSON.parse(this.props.service.options),function(a){return n.a.createElement("div",{className:"tab-pane ".concat(0==t++?"show active":""),id:a.name,role:"tabpanel","aria-labelledby":"tab-".concat(a.name)},n.a.createElement("p",null,a.description),e.props.loggedIn&&!r?n.a.createElement("button",{onClick:e.handleChatClick,type:"button",className:"btn btn-outline-success btn-block"},"Continue ($",a.price,")"):n.a.createElement("button",{onClick:e.handleChatClick,type:"button",className:"btn btn-outline-success btn-block",disabled:!0},"Continue ($",a.price,")"))})}},{key:"renderOptions",value:function(){return n.a.createElement("div",{className:"options text-muted"},n.a.createElement("nav",null,n.a.createElement("div",{className:"option-tabs nav nav-tabs text-center nav-justified",id:"nav-tab",role:"tablist"},this.renderOptionTabs())),n.a.createElement("div",{className:"option-info tab-content p-3 px-4",id:"nav-tabContent"},this.renderOptionContent()))}},{key:"renderOwner",value:function(){var e=this.props.service.owner,t=this.props.user&&e===this.props.user._id;return n.a.createElement("div",{className:"owner text-muted p-3 text-center"},n.a.createElement("p",{className:"av"},n.a.createElement("i",{className:"fa fa-user-circle fa-3x"})),n.a.createElement("p",{className:"owner-name"},"".concat(this.props.serviceOwner.firstName," ").concat(this.props.serviceOwner.lastName)),n.a.createElement("a",{className:"email",href:"mailto:".concat(this.props.serviceOwner.email)},this.props.serviceOwner.email),n.a.createElement("button",{onClick:this.handleOwnerClick,type:"button",className:"btn btn-outline-primary btn-block mt-2"},"View Profile"),n.a.createElement("div",null,this.props.loggedIn&&!t&&this.props.loggedIn?n.a.createElement("button",{onClick:this.handleChatClick,type:"button",className:"btn btn-outline-primary btn-block mt-2"},"Message Seller"):n.a.createElement("button",{onClick:this.handleChatClick,type:"button",className:"btn btn-outline-primary btn-block mt-2",disabled:!0},"Message Seller")))}},{key:"prepPhotos",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push({src:e[a]});return t}},{key:"renderCarouselItems",value:function(e){var t=0;return de.a.map(e,function(e){return n.a.createElement("div",{class:"carousel-item img ".concat(0===t++?"active":"")},n.a.createElement("img",{class:"d-block img-thing",src:e.src,alt:"Cute pic of dogs lol"}))})}},{key:"renderCarousel",value:function(e){return n.a.createElement("div",{id:"carousel",class:"carousel slide","data-ride":"false"},n.a.createElement("div",{class:"carousel-inner img-container"},this.renderCarouselItems(e)),n.a.createElement("a",{class:"carousel-control-prev",href:"#carousel",role:"button","data-slide":"prev"},n.a.createElement("span",{class:"carousel-control-prev-icon","aria-hidden":"true"}),n.a.createElement("span",{class:"sr-only"},"Previous")),n.a.createElement("a",{class:"carousel-control-next",href:"#carousel",role:"button","data-slide":"next"},n.a.createElement("span",{class:"carousel-control-next-icon","aria-hidden":"true"}),n.a.createElement("span",{class:"sr-only"},"Next")))}},{key:"renderFavoriteButton",value:function(){return n.a.createElement("div",{onClick:this.handleHeartClickEvent,className:"heart-service-view"},n.a.createElement("i",{className:"fa ".concat(this.props.user&&this.props.user.favorites&&this.props.user.favorites.includes(this.props.service._id)?"fa-heart":"fa-heart-o")}))}},{key:"render",value:function(){var e=this.props.match.params.id;if(!this.props.service||!this.props.serviceOwner||this.props.service._id!=e)return n.a.createElement("div",{className:"service-view container text-center"},n.a.createElement(Se.SyncLoader,{className:"loader",sizeUnit:"px",size:15,margin:"5px",color:"rgb(0, 132, 137)"}));var t=this.props.service.owner,a=this.props.user&&t===this.props.user._id,r=Ie(this.props.comments);return n.a.createElement("div",{className:"service-view container"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-lg-8 col-md-12"},n.a.createElement("div",{className:"service-info"},n.a.createElement("div",{className:""},this.renderCarousel(this.props.service.photos&&0!==this.props.service.photos.length?this.prepPhotos(this.props.service.photos):Ne)),n.a.createElement("div",{className:"service-header"},n.a.createElement("div",{className:"row"},n.a.createElement("h1",{className:"col col-10 title"},this.props.service.name),n.a.createElement("div",{className:"col col-2"},this.renderFavoriteButton())),n.a.createElement("h6",{className:"category mb-2 text-muted"},this.props.service.tags.length>0?this.props.service.tags[0].toUpperCase():""),n.a.createElement("h6",{className:"price card-subtitle mb-2 text-success "},"$",this.props.service.price," per service")),n.a.createElement(he.a,{options:I,className:"service-description py-3"},this.props.service.description))),n.a.createElement("div",{className:"col px-1"},n.a.createElement("div",{className:"options-and-owner sticky-top px-2"},this.props.service.options&&this.renderOptions(),this.props.service.options&&n.a.createElement("div",{className:"p-3"}),this.renderOwner()))),n.a.createElement("div",{className:"reviews col-md-8 p-0 pt-3"},n.a.createElement(Oe,{starColor:"rgb(0, 132, 137)",overallRating:r}),this.renderServiceReviews(r),this.props.loggedIn&&!a&&this.renderCreateReview()),n.a.createElement("div",{className:"p-5"}))}}]),t}(r.Component);function Ie(e){var t,a=0;if(!e)return 0;for(t=0;t<e.length;t++)a+=e[t].rateing;return a/e.length}var xe=Object(c.b)(function(e){return{user:e.user.user,loggedIn:e.user.loggedIn,service:e.services.service,comments:e.services.comments,serviceOwner:e.user.serviceOwner,currentUser:e.chat.currentUser,joinableRooms:e.chat.joinableRooms,createdRoom:e.chat.createdRoom}},{addFavorite:re,fetchServiceAndOwner:function(e){return S.a.get("".concat(D,"/services/").concat(e)).then(function(e){return(t=e.data.service.owner,S.a.get("".concat(D,"/users/").concat(t)).then(function(e){return{type:V,payload:e}})).then(function(t){return e.data.owner=t.payload.data.user,{type:G,payload:e}});var t})},connectChat:ae,createRoom:function(e,t,a){return e.createRoom({name:a,private:!0,addUserIds:["".concat(t)]}).then(function(e){return{type:K,payload:e}}).catch(function(e){400===e.statusCode&&console.log("User needs to be added to chatkit")})}})(we),Te=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={image:null},a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"handleUploadFile",value:function(){var e=new FormData,t=this.props.resource,a=this.props.resourceId;e.append("image",this.state.image),S.a.post("".concat("https://bazaar-backend.herokuapp.com/api","/photos/").concat(t,"/").concat(a,"/create"),e).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},{key:"renderSubmitButton",value:function(){if(this.state.image)return n.a.createElement("button",{type:"submit",className:"fa fa-upload fa-xs upload",onClick:this.handleUploadFile.bind(this)})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("span",{className:"file-input-wrapper"},n.a.createElement("i",{className:"fa fa-file-image-o"}),n.a.createElement("input",{type:"file",name:"image",onChange:function(t){return e.setState({image:t.target.files[0]})}})),this.renderSubmitButton())}}]),t}(r.Component),Me=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).openServiceView=a.openServiceView.bind(Object(y.a)(Object(y.a)(a))),a.handleEditServiceClickEvent=a.handleEditServiceClickEvent.bind(Object(y.a)(Object(y.a)(a))),a.handleDeleteServiceClickEvent=a.handleDeleteServiceClickEvent.bind(Object(y.a)(Object(y.a)(a))),a.handleHeartClickEvent=a.handleHeartClickEvent.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"openServiceView",value:function(){this.props.history.push("/services/".concat(this.props.service._id))}},{key:"handleEditServiceClickEvent",value:function(){this.props.setServiceToEdit(this.props.service),this.props.history.push("/service/edit")}},{key:"handleDeleteServiceClickEvent",value:function(){this.props.setServiceToEdit(this.props.service),this.props.toggleDeleteServiceModal()}},{key:"handleHeartClickEvent",value:function(){this.props.user&&this.props.addFavorite(this.props.service._id)}},{key:"renderGearbox",value:function(){return n.a.createElement("div",{className:"gearbox text-right"},n.a.createElement(Te,{resource:"service",resourceId:this.props.service._id}),n.a.createElement("i",{onClick:this.handleEditServiceClickEvent,className:"fa fa-gear text-muted"}),n.a.createElement("i",{onClick:this.handleDeleteServiceClickEvent,className:"fa fa-trash-o text-danger"}))}},{key:"renderFavoriteButton",value:function(){return n.a.createElement("div",{onClick:this.handleHeartClickEvent,className:"heart-card"},n.a.createElement("i",{className:"fa ".concat(this.props.user&&this.props.user.favorites&&this.props.user.favorites.includes(this.props.service._id)?"fa-heart":"fa-heart-o")}))}},{key:"render",value:function(){return this.props.service?n.a.createElement("div",{className:"col-lg-3 col-md-6 col-sm-6 col-12 p-0"},n.a.createElement("div",{className:"card"},this.renderFavoriteButton(),n.a.createElement("div",{className:"img-container"},n.a.createElement("img",{className:"card-img-top cursor img",onClick:this.openServiceView,src:this.props.service.photos&&0!==this.props.service.photos.length?this.props.service.photos[0]:"https://picsum.photos/600/390/?random",alt:"Card image"})),n.a.createElement("div",{className:"card-info cursor",onClick:this.openServiceView},n.a.createElement("h6",{className:"tag card-subtitle mb-2 text-muted"},this.props.service.tags.length>0?this.props.service.tags[0].toUpperCase():""),n.a.createElement("h5",{className:"title card-title"},this.props.service.name),n.a.createElement("h6",{className:"price card-subtitle mb-2 text-success"},"$",this.props.service.price," per service")),this.props.ableToEdit&&this.renderGearbox())):""}}]),t}(r.Component);var De=Object(me.a)(Object(c.b)(function(e){return{user:e.user.user}},{setServiceToEdit:function(e){return{type:A,payload:e}},addFavorite:re})(Me)),Pe=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"renderCardList",value:function(){var e=this;return de.a.map(this.props.isHome?this.props.services.slice(0,4):this.props.services,function(t){return n.a.createElement(De,{key:t._id,service:t,ableToEdit:e.props.ableToEdit,toggleEditServiceModal:e.props.toggleEditServiceModal,toggleDeleteServiceModal:e.props.toggleDeleteServiceModal})})}},{key:"renderShowAll",value:function(){return n.a.createElement("div",{className:"list-show-all"},n.a.createElement(O.a,{to:"/category/".concat(this.props.header)},"Show all (",this.props.services.length,") ",n.a.createElement("i",{className:"fa fa-lg fa-angle-right"})))}},{key:"render",value:function(){return n.a.createElement("div",{className:"list-row py-2 px-1"},n.a.createElement("h1",{className:"list-category"},this.props.header),n.a.createElement("h6",{className:"list-description"},this.props.description),n.a.createElement("div",{className:"row"},this.renderCardList()),this.props.isHome&&this.renderShowAll())}}]),t}(r.Component),Re=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleDeleteClick=a.handleDeleteClick.bind(Object(y.a)(Object(y.a)(a))),a.handleCancelClick=a.handleCancelClick.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"handleDeleteClick",value:function(){var e=this;this.props.deleteService(this.props.service._id,function(){e.props.successCallback()})}},{key:"handleCancelClick",value:function(){this.props.cancelCallback()}},{key:"render",value:function(){return n.a.createElement("div",{className:"delete text-center"},n.a.createElement("i",{className:"fa fa-trash-o fa-5x text-danger p-4"}),n.a.createElement("h1",null,"Are you sure?"),n.a.createElement("p",null,"Are you sure you want us to permanently delete this service?"),n.a.createElement("div",{className:"p-2"},n.a.createElement("button",{onClick:this.handleDeleteClick,type:"button",className:"btn btn-lg btn-danger"},"Delete"),n.a.createElement("button",{onClick:this.handleCancelClick,type:"button",className:"btn btn-lg"},"Cancel")))}}]),t}(r.Component);var _e=Object(c.b)(function(e){return{service:e.services.serviceToEdit}},{deleteService:function(e,t){var a={id:e};return S.a.post("".concat(D,"/services/delete"),a).then(function(e){return t(),{type:L,payload:e}})}})(Re),Le=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={showEditServiceModal:!1,showDeleteServiceModal:!1},a.toggleDeleteServiceModal=a.toggleDeleteServiceModal.bind(Object(y.a)(Object(y.a)(a))),a.deleteSuccessCallback=a.deleteSuccessCallback.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){window.scrollTo(0,0),this.props.user||this.props.history.push("/")}},{key:"componentDidMount",value:function(){this.props.user&&(this.props.fetchUsersServices(this.props.user._id),this.props.fetchFavoriteServices(this.props.user._id))}},{key:"toggleDeleteServiceModal",value:function(){this.setState(Object(E.a)({},this.state,{showDeleteServiceModal:!this.state.showDeleteServiceModal}))}},{key:"deleteSuccessCallback",value:function(){this.props.fetchUsersServices(this.props.user._id),this.toggleDeleteServiceModal()}},{key:"renderDeleteModal",value:function(){return n.a.createElement(pe,{isOpen:this.state.showDeleteServiceModal,toggle:this.toggleDeleteServiceModal,modalBody:n.a.createElement(_e,{successCallback:this.deleteSuccessCallback,cancelCallback:this.toggleDeleteServiceModal})})}},{key:"render",value:function(){return this.props.services&&this.props.favorites?0!==this.props.services.length||this.props.favorites&&0!==this.props.favorites.length?n.a.createElement("div",{className:"container account"},this.props.services.length>0&&n.a.createElement(Pe,{header:"My Services",services:this.props.services,ableToEdit:!0,toggleEditServiceModal:this.toggleEditServiceModal,toggleDeleteServiceModal:this.toggleDeleteServiceModal}),this.props.favorites&&this.props.favorites.length>0&&n.a.createElement(Pe,{header:"My Favorites",services:this.props.favorites}),this.renderDeleteModal()):n.a.createElement("div",{className:"account container text-center"},n.a.createElement("h1",null,"You don't have any services or favorites.")):n.a.createElement("div",{className:"account container text-center"},n.a.createElement(Se.SyncLoader,{className:"p-5",sizeUnit:"px",size:15,margin:"5px",color:"rgb(0, 132, 137)"}))}}]),t}(r.Component);var Ue=Object(c.b)(function(e){return console.log(e),{user:e.user.user,services:e.services.accountServices,favorites:e.services.favorites}},{fetchUsersServices:function(e){return{type:B,payload:S.a.get("".concat(D,"/services/user/").concat(e))}},fetchFavoriteServices:function(e){return S.a.get("".concat(D,"/users/").concat(e)).then(function(e){for(var t=[],a={},r=0;r<e.data.favoriteServices.length;r++)a[e.data.favoriteServices[r].service._id]||(t.push(e.data.favoriteServices[r].service),a[e.data.favoriteServices[r].service._id]=!0);return{type:Z,payload:t}})}})(Le),Fe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={term:""},a.fetchServices=de.a.debounce(a.fetchServices,100),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"fetchServices",value:function(e){this.props.category?this.props.fetchServicesByTag(this.props.category,e):this.props.serviceSearch(e)}},{key:"onInputChange",value:function(e){this.setState({term:e}),this.fetchServices(e),e&&this.props.inputHasTerm?this.props.inputHasTerm(!0):this.props.inputHasTerm&&this.props.inputHasTerm(!1)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"search pt-3 px-0"},n.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Search ".concat(this.props.category?"in ".concat(this.props.category):""),value:this.state.term,onChange:function(t){return e.onInputChange(t.target.value)}}),n.a.createElement("hr",null))}}]),t}(r.Component);var He=Object(c.b)(null,function(e){return Object(o.b)({fetchServicesByTag:ee,serviceSearch:te},e)})(Fe),Be=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"results-view"},n.a.createElement(Pe,{key:"Results",header:"Search Results",description:this.props.services?"Showing ".concat(this.props.services.length," results"):"",services:this.props.services})))}}]),t}(r.Component);var We=Object(c.b)(function(e){return{services:e.services.searchResults}},{serviceSearch:te})(Be),ze=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={searchHasTerm:!1},a.setSearchHasTerm=a.setSearchHasTerm.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;de.a.map(w,function(t){e.props.fetchServicesByTag(t.category)})}},{key:"setSearchHasTerm",value:function(e){this.setState({searchHasTerm:e})}},{key:"renderServiceCategories",value:function(){var e=this;return de.a.map(w,function(t){return!e.props.services[t.category]||e.props.services[t.category].length<1?"":n.a.createElement(Pe,{key:t.category,header:t.category,description:t.description,services:e.props.services[t.category],isHome:!0})})}},{key:"render",value:function(){return this.props.services?n.a.createElement("div",{className:"home container"},n.a.createElement(He,{inputHasTerm:this.setSearchHasTerm}),this.state.searchHasTerm?n.a.createElement(We,null):n.a.createElement("div",{className:""},this.renderServiceCategories()),n.a.createElement("div",{className:"p-5"})):n.a.createElement("div",{className:"home container text-center"},n.a.createElement(He,{inputHasTerm:this.setSearchHasTerm}),n.a.createElement(Se.SyncLoader,{className:"p-4",sizeUnit:"px",size:15,margin:"5px",color:"rgb(0, 132, 137)"}))}}]),t}(r.Component);var Ae=Object(c.b)(function(e){return{services:e.services.servicesByCategory}},{fetchServicesByTag:ee})(ze),Je=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={categoryObject:null},a.getCategory=a.getCategory.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"getCategory",value:function(e){e=e.toLowerCase();for(var t=0;t<w.length;t++)if(w[t].category.toLowerCase()===e)return w[t];return null}},{key:"componentDidMount",value:function(){var e=this.props.match.params.category,t=this.getCategory(e);window.scrollTo(0,0),this.setState({categoryObject:t}),t&&this.props.fetchServicesByTag(t.category)}},{key:"render",value:function(){var e=this.props.match.params.category;return this.props.services&&this.state.categoryObject?n.a.createElement("div",{className:"category-view container"},n.a.createElement(He,{category:this.state.categoryObject.category}),n.a.createElement("div",null,n.a.createElement(Pe,{key:this.state.categoryObject.category,header:this.state.categoryObject.category,description:this.state.categoryObject.description,services:this.props.services[this.state.categoryObject.category],ableToEdit:!1}))):n.a.createElement("div",{className:"category-view container"},"This (",e,") isn't a category.")}}]),t}(r.Component);var $e=Object(c.b)(function(e){return{services:e.services.servicesByCategory}},{fetchServicesByTag:ee})(Je),Ve=a(108),Ge=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"message"},n.a.createElement("div",{className:"message-user"},this.props.user),n.a.createElement("div",{className:"message-text"},this.props.text))}}]),t}(r.Component),Ye=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,this.props.messages.map(function(e,t){return n.a.createElement(Ge,{key:t,user:e.sender.name,text:e.text})}))}}]),t}(r.Component),qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={message:""},a.onInputChange=a.onInputChange.bind(Object(y.a)(Object(y.a)(a))),a.handleSubmit=a.handleSubmit.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"onInputChange",value:function(e){this.setState({message:e})}},{key:"handleSubmit",value:function(e){""!=this.state.message&&(e.preventDefault(),this.props.sendMessage(this.state.message),this.setState({message:""}))}},{key:"render",value:function(){var e=this;return n.a.createElement("form",{onSubmit:this.handleSubmit,className:"send-message-form"},n.a.createElement("input",{disabled:this.props.disabled,onChange:function(t){return e.onInputChange(t.target.value)},value:this.state.message,placeholder:"Send Message...",type:"text"}))}}]),t}(r.Component),Ke=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"rooms-list account"},n.a.createElement("ul",null,n.a.createElement("h4",{className:"font-weight-bold"},"Direct Messages"),this.props.rooms.map(function(t){var a=e.props.roomId===t.id?"active":"";return n.a.createElement("li",{key:t.id,className:"room "+a},n.a.createElement("a",{onClick:function(){return e.props.subscribeToRoom(t.id)},href:"#"},t.name))})))}}]),t}(r.Component),Qe=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={roomId:null,messages:[]},a.sendMessage=a.sendMessage.bind(Object(y.a)(Object(y.a)(a))),a.subscribeToRoom=a.subscribeToRoom.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.roomId;e&&this.setState({roomId:e}),this.props.connectChat(this.props.user._id)}},{key:"subscribeToRoom",value:function(e){var t=this;this.setState({messages:[]}),this.props.currentUser.subscribeToRoom({roomId:e,hooks:{onMessage:function(e){t.setState({messages:[].concat(Object(Ve.a)(t.state.messages),[e])})}}}).then(function(e){t.setState({roomId:e.id})}).catch(function(e){return console.log("error on subscribing to room",e)})}},{key:"sendMessage",value:function(e){this.props.currentUser.sendMessage({text:e,roomId:this.state.roomId})}},{key:"render",value:function(){return this.props.currentUser?n.a.createElement("div",{className:"direct-messages container account row"},n.a.createElement(Ke,{className:"room-list-c col",roomId:this.state.roomId,subscribeToRoom:this.subscribeToRoom,rooms:this.props.currentUser.rooms}),n.a.createElement("div",{className:"message-send-part col"},n.a.createElement(Ye,{messages:this.state.messages}),n.a.createElement(qe,{sendMessage:this.sendMessage,currentUser:this.props.currentUser,roomId:this.state.roomId,disabled:!this.state.roomId}))):n.a.createElement("div",{className:"service-view container text-center"},n.a.createElement(Se.SyncLoader,{className:"p-5",sizeUnit:"px",size:15,margin:"5px",color:"rgb(0, 132, 137)"}))}}]),t}(r.Component);var Xe=Object(c.b)(function(e){return{user:e.user.user,currentUser:e.chat.currentUser,joinableRooms:e.chat.joinableRooms}},{connectChat:ae})(Qe),Ze=a(105),et=a.n(Ze),tt=a(106),at=a.n(tt),rt=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={fadeIn:!0},a.renderServices=a.renderServices.bind(Object(y.a)(Object(y.a)(a))),a.renderCounter=a.renderCounter.bind(Object(y.a)(Object(y.a)(a))),a.renderTopReviews=a.renderTopReviews.bind(Object(y.a)(Object(y.a)(a))),a}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props.match.params.userId;this.props.fetchUserViewServices(e)}},{key:"renderServices",value:function(e,t){return n.a.createElement("div",{className:"container"},n.a.createElement(Pe,{header:e,description:"",services:t,isHome:!1}))}},{key:"renderCounter",value:function(e){return n.a.createElement("div",{className:"user-view-counter bg-secondary rounded text-white"},n.a.createElement(et.a,{className:"custom-count",start:0,end:e,duration:4,delay:0,decimals:1}))}},{key:"renderTopReviews",value:function(e,t){return n.a.createElement("h6",null,n.a.createElement("h5",null,"Top ".concat(t," Review")),n.a.createElement("div",{className:"top-text"},n.a.createElement(Oe,{starColor:"rgb(0, 132, 137)",overallRating:e.rateing}),n.a.createElement(at.a,{lines:1,tag:"p",ellipsisChars:"...",tagClass:"className",debounceTimeoutOnResize:200,useJsOnly:!0},'"'.concat(e.comment,'"'))))}},{key:"render",value:function(){if(!this.props.serviceOwner)return n.a.createElement("div",{className:"service-view container text-center"},n.a.createElement(Se.SyncLoader,{className:"loader",sizeUnit:"px",size:15,margin:"5px",color:"rgb(0, 132, 137)"}));var e=function(e){if(!e)return 0;var t,a=0,r=e.length;for(t=0;t<e.length;t++)0==e[t].length?r--:a+=Ie(e[t]);return 0===r?0:a/r}(this.props.profileComments),t=function(e){var t=[];if(e){for(var a=0;a<e.length;a++)t=de.a.union(t,e[a]);return 0===(t=de.a.sortBy(t,"rateing")).length?null:{positive:de.a.last(t),critical:de.a.head(t)}}return null}(this.props.profileComments),a=t?3:5;return n.a.createElement("div",null,n.a.createElement(se.c,null,n.a.createElement(se.b,{in:this.state.fadeIn,timeout:200,tag:"h1",className:"mt-6"},n.a.createElement("h1",{className:"jumbo-greeting display-4 text-center"},"Hi, I'm ".concat(this.props.serviceOwner.firstName,"!")),n.a.createElement("hr",{className:"user-view-hr"}),n.a.createElement(se.b,{in:this.state.fadeIn,timeout:300,tag:"h1",className:"mt-6"},n.a.createElement("div",{className:"row offset-md-".concat(a)},n.a.createElement("div",{className:"col col-4 rating-email"},n.a.createElement("div",{className:"row"},this.renderCounter(e),n.a.createElement("div",{className:"user-view-rating"},"average rating")),n.a.createElement("div",{className:"row user-view-contact"},n.a.createElement("i",{className:" fa fa-envelope fa-lg"}),n.a.createElement("div",{className:" user-view-email"},this.props.serviceOwner.email))),n.a.createElement("div",{className:"col offset-md-1 top-reviews"},n.a.createElement("div",{className:"row top-positive"},t&&this.renderTopReviews(t.positive,"Positive")),n.a.createElement("div",{className:"row top-critical"},t&&this.renderTopReviews(t.critical,"Critical"))))))),this.renderServices("".concat(this.props.serviceOwner.firstName,"'s Services"),this.props.profileServices))}}]),t}(r.Component);var nt=Object(c.b)(function(e){return{user:e.user.user,profileServices:e.services.profileServices,profileComments:e.services.profileComments,serviceOwner:e.user.serviceOwner}},{fetchUserViewServices:function(e){return{type:Q,payload:S.a.get("".concat(D,"/services/user/").concat(e))}}})(rt),st=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){localStorage.getItem("loggedInUser")&&this.props.getUserFromLocalStorage()}},{key:"render",value:function(){return n.a.createElement(g.a,null,n.a.createElement("div",null,n.a.createElement(b.a,{component:fe}),n.a.createElement("div",{className:"app-body"},n.a.createElement(f.a,null,n.a.createElement(b.a,{path:"/category/:category",component:$e}),n.a.createElement(b.a,{path:"/services/:id",component:xe}),n.a.createElement(b.a,{path:"/service/create",component:ge}),n.a.createElement(b.a,{path:"/service/edit",component:function(){return n.a.createElement(ge,{isEdit:!0})}}),n.a.createElement(b.a,{path:"/account",component:Ue}),n.a.createElement(b.a,{path:"/user/:userId",component:nt}),n.a.createElement(b.a,{path:"/messages/",component:Xe}),n.a.createElement(b.a,{path:"/messages/:roomId",component:Xe}),n.a.createElement(b.a,{path:"/",component:Ae})))))}}]),t}(r.Component);var it=Object(c.b)(function(e){return{user:e.user.user}},{getUserFromLocalStorage:function(){return S.a.defaults.headers.common.Authorization="Bearer ".concat(JSON.parse(localStorage.getItem("token"))),{type:W,payload:JSON.parse(localStorage.getItem("loggedInUser"))}}})(st),ct=a(177),ot=a(58),lt=Object(o.c)({form:ct.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return 201===t.payload.status?(localStorage.setItem("loggedInUser",JSON.stringify(t.payload.data.createdUser)),localStorage.setItem("token",JSON.stringify(t.payload.data.token)),Object(E.a)({},e,{loggedIn:!0,user:t.payload.data.createdUser})):e;case U:return 200===t.payload.status?(localStorage.setItem("loggedInUser",JSON.stringify(t.payload.data.user)),localStorage.setItem("token",JSON.stringify(t.payload.data.token)),Object(E.a)({},e,{loggedIn:!0,user:t.payload.data.user})):e;case W:return Object(E.a)({},e,{loggedIn:!0,user:JSON.parse(localStorage.getItem("loggedInUser"))});case z:return{user:null,loggedIn:!1};case G:return Object(E.a)({},e,{serviceOwner:t.payload.data.owner});case X:return 200===t.payload.status?(localStorage.setItem("loggedInUser",JSON.stringify(t.payload.data.result)),Object(E.a)({},e,{user:t.payload.data.result})):e;default:return e}},services:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case H:return Object(E.a)({},e,{services:t.payload.data.services});case R:case _:return e;case L:return 200==t.payload.status?Object(E.a)({},e,{services:t.payload.data.services}):e;case F:return Object(E.a)({},e,{searchResults:t.payload.data.results});case G:return 0==t.payload.data.comments?Object(E.a)({},e,{service:t.payload.data.service,comments:null}):Object(E.a)({},e,{service:t.payload.data.service,comments:t.payload.data.comments});case J:return 200==t.payload.status?Object(E.a)({},e,{servicesByCategory:Object(E.a)({},e.servicesByCategory,Object(ot.a)({},t.tag,t.payload.data.results))}):Object(E.a)({},e,{servicesByCategory:Object(E.a)({},e.servicesByCategory,Object(ot.a)({},t.tag,null))});case B:return 200==t.payload.status?Object(E.a)({},e,{accountServices:t.payload.data.userServices}):Object(E.a)({},e,{accountServices:[]});case Q:return 200==t.payload.status?Object(E.a)({},e,{profileServices:t.payload.data.userServices,profileComments:t.payload.data.userServicesComments}):Object(E.a)({},e,{profileServices:[]});case A:return Object(E.a)({},e,{serviceToEdit:t.payload});case $:return Object(E.a)({},e);case Z:return Object(E.a)({},e,{favorites:t.payload});default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(E.a)({},e,{currentUser:t.payload});case q:return Object(E.a)({},e,{joinableRooms:t.payload});case K:return Object(E.a)({},e,{createdRoom:t.payload});default:return e}}}),pt=Object(o.a)(p.a)(o.d);i.a.render(n.a.createElement(c.a,{store:pt(lt)},n.a.createElement(it,null)),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.b92115ae.chunk.js.map